<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title glot-model="header_title">Emoji favicon bookmark maker</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ™</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://unpkg.com/glottologist"></script>
</head>

<body class="vh-100">
    <header class="jumbotron h-25 bg-primary">
        <div class="container h-100 d-flex align-items-center justify-content-center">
            <h1 class="text-white" glot-model="header_title">Emoji favicon bookmarklet maker</h1>
        </div>
    </header>
    <main class="jumbotron h-75">
        <div class="container h-100 d-flex align-items-center justify-content-center">
            <div>
                <div class="p-4" glot-model="label_usage">
                    <p>You can change the favicon of this page to any emoji.</p>
                    <p>You can bookmark this page and use it as a favicon for your bookmarklet.</p>
                    <p>Each time you change the favicon, the URL changes, so you can register it continuously.</p>
                </div>
                <div class="p-4">
                    <div class="col-auto">
                        <label for="emoji" class="form-label" glot-model="label_emoji">Emoji's you want to use as
                            favicons</label>
                        <input type="text" class="form-control" id="emoji">
                    </div>
                </div>
                <div class="p-4">
                    <div class="col-auto">
                        <button class="btn btn-primary" glot-model="btn_apply">applay</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        // Replacing Strings with i18n Libraries
        const glot = new Glottologist();
        glot.import("dict.json").then(() => {
            glot.render();
        });

        // Fake jQuery
        function $(selector) {
            const elems = document.querySelectorAll(selector);
            return elems.length == 1 ? elems[0] : elems;
        }

        // Set the favicon to the emoji entered
        // when the apply button is clicked.
        $('button').addEventListener('click', e => {
            const emoji = $('#emoji').value;
            $('[rel=icon]').setAttribute('href', `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${emoji}</text></svg>`);

            // Change the URL to allow consecutive registrations.
            history.replaceState(null, null, '?' + (new Date).getTime());
        });

        // When the enter key is entered in the input field,
        // the movement is the same as when the apply button is clicked.
        $('#emoji').addEventListener('keypress', e => {
            if (e.code == 'Enter') {
                $('button').click();
            }
        });
    </script>
</body>

</html>